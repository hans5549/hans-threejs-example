# Implementation Plan: CSS3D é€±æœŸè¡¨ (Periodic Table)

**Branch**: `3-css3d-periodic-table` | **Date**: 2025-11-28 | **Spec**: [spec.md](./spec.md)

---

## Summary

å»ºç«‹ä½¿ç”¨ Three.js CSS3DRenderer çš„äº’å‹•å¼ 3D é€±æœŸè¡¨å±•ç¤ºæ‡‰ç”¨ã€‚é€±æœŸè¡¨åŒ…å« 118 å€‹åŒ–å­¸å…ƒç´ å¡ç‰‡ï¼Œæ”¯æ´å››ç¨® 3D è¦–åœ–åˆ‡æ›ï¼ˆTableã€Sphereã€Helixã€Gridï¼‰ï¼Œä½¿ç”¨ TWEEN.js å¯¦ç¾å¹³æ»‘å‹•ç•«éæ¸¡ï¼Œä¸¦é€é TrackballControls æä¾›æ»‘é¼ äº’å‹•æ§åˆ¶ã€‚

---

## Technical Context

**Language/Version**: HTML5 + JavaScript (ES6 Modules)  
**Primary Dependencies**: Three.js 0.160.0, TWEEN.js, CSS3DRenderer, TrackballControls  
**Storage**: N/A (éœæ…‹å±•ç¤ºæ‡‰ç”¨)  
**Testing**: æ‰‹å‹•ç€è¦½å™¨æ¸¬è©¦ + è¦–è¦ºé©—è­‰  
**Target Platform**: ç¾ä»£ç€è¦½å™¨ (Chrome, Firefox, Safari, Edge)  
**Project Type**: Single HTML æ‡‰ç”¨ (èˆ‡å°ˆæ¡ˆå…¶ä»–ç¯„ä¾‹ä¸€è‡´)  
**Performance Goals**: 60 fps æ¸²æŸ“ã€3 ç§’å…§å®Œæˆåˆå§‹å‹•ç•«  
**Constraints**: ä½¿ç”¨ CDN è¼‰å…¥ã€ç„¡å»ºæ§‹å·¥å…·ä¾è³´  
**Scale/Scope**: 118 å€‹ DOM å…ƒç´ ã€4 ç¨®è¦–åœ–ä½ˆå±€

---

## Constitution Check

*GATE: æ­¤å°ˆæ¡ˆä½¿ç”¨é è¨­ç¯„æœ¬ constitutionï¼Œç„¡ç‰¹æ®Šç´„æŸã€‚*

| æª¢æŸ¥é …ç›® | ç‹€æ…‹ | èªªæ˜ |
|----------|------|------|
| å°ˆæ¡ˆçµæ§‹ä¸€è‡´æ€§ | âœ… PASS | éµå¾ª examples/ ç›®éŒ„ä¸‹å–®ä¸€ HTML æª”æ¡ˆçµæ§‹ |
| ä¾è³´ç®¡ç† | âœ… PASS | ä½¿ç”¨ CDN + Import Mapï¼Œèˆ‡ç¾æœ‰ç¯„ä¾‹ä¸€è‡´ |
| å‘½åè¦ç¯„ | âœ… PASS | ä½¿ç”¨ kebab-case ç›®éŒ„åç¨± |
| æ–‡ä»¶å®Œæ•´æ€§ | âœ… PASS | è¦æ ¼ã€ç ”ç©¶ã€è³‡æ–™æ¨¡å‹ã€å¿«é€ŸæŒ‡å—çš†å·²å»ºç«‹ |

**Gate Result**: âœ… PASSED - å¯é€²å…¥å¯¦ä½œéšæ®µ

---

## Project Structure

### Documentation (this feature)

```text
specs/3-css3d-periodic-table/
â”œâ”€â”€ spec.md              # åŠŸèƒ½è¦æ ¼ (/speckit.specify è¼¸å‡º)
â”œâ”€â”€ plan.md              # æœ¬æ–‡ä»¶ (/speckit.plan è¼¸å‡º)
â”œâ”€â”€ research.md          # æŠ€è¡“ç ”ç©¶ (/speckit.plan Phase 0)
â”œâ”€â”€ data-model.md        # è³‡æ–™æ¨¡å‹ (/speckit.plan Phase 1)
â”œâ”€â”€ quickstart.md        # å¿«é€Ÿå…¥é–€ (/speckit.plan Phase 1)
â”œâ”€â”€ tasks.md             # ä»»å‹™æ¸…å–® (/speckit.tasks è¼¸å‡º)
â””â”€â”€ checklists/
    â””â”€â”€ requirements.md  # éœ€æ±‚æª¢æŸ¥æ¸…å–®
```

### Source Code (repository root)

```text
examples/
â”œâ”€â”€ interactive-raycasting-points/
â”‚   â””â”€â”€ index.html           # ç¾æœ‰ç¯„ä¾‹
â”œâ”€â”€ unreal-bloom-postprocessing/
â”‚   â””â”€â”€ index.html           # ç¾æœ‰ç¯„ä¾‹
â””â”€â”€ css3d-periodic-table/    # æ–°å»ºç›®éŒ„
    â””â”€â”€ index.html           # æœ¬åŠŸèƒ½å¯¦ä½œ (å–®ä¸€æª”æ¡ˆ)
```

**Structure Decision**: æ¡ç”¨ Single HTML çµæ§‹ï¼Œèˆ‡å°ˆæ¡ˆç¾æœ‰ç¯„ä¾‹ä¿æŒä¸€è‡´ã€‚æ‰€æœ‰ CSS å’Œ JavaScript å…§åµŒæ–¼ HTML æª”æ¡ˆä¸­ï¼Œé€é CDN Import Map è¼‰å…¥å¤–éƒ¨ä¾è³´ã€‚

---

## Implementation Phases

### Phase 0: Research âœ… COMPLETE

**Output**: [research.md](./research.md)

- âœ… CSS3DRenderer ä½¿ç”¨æ–¹å¼ç ”ç©¶
- âœ… TWEEN.js å‹•ç•«å‡½å¼åº«ç ”ç©¶
- âœ… TrackballControls äº’å‹•æ§åˆ¶ç ”ç©¶
- âœ… å››ç¨®è¦–åœ–ä½ˆå±€æ¼”ç®—æ³•ç¢ºèª
- âœ… CDN è¼‰å…¥ç­–ç•¥ç¢ºèª

### Phase 1: Design âœ… COMPLETE

**Output**: [data-model.md](./data-model.md), [quickstart.md](./quickstart.md)

- âœ… åŒ–å­¸å…ƒç´ è³‡æ–™çµæ§‹å®šç¾©
- âœ… CSS3D ç‰©ä»¶æ¨¡å‹å®šç¾©
- âœ… ç›®æ¨™ä½ˆå±€æ¼”ç®—æ³•è¨­è¨ˆ
- âœ… CSS æ¨£å¼è¦æ ¼å®šç¾©
- âœ… å¿«é€Ÿå…¥é–€æŒ‡å—æ’°å¯«

### Phase 2: Task Planning ğŸ“‹ NEXT

**Output**: tasks.md (ç”± `/speckit.tasks` å»ºç«‹)

å°‡åˆ†è§£ä»¥ä¸‹å·¥ä½œé …ç›®ï¼š
1. å»ºç«‹å°ˆæ¡ˆç›®éŒ„çµæ§‹
2. å¯¦ä½œåŸºç¤ HTML çµæ§‹èˆ‡æ¨£å¼
3. å¯¦ä½œ Three.js å ´æ™¯åˆå§‹åŒ–
4. å¯¦ä½œåŒ–å­¸å…ƒç´ å¡ç‰‡å»ºç«‹
5. å¯¦ä½œå››ç¨®è¦–åœ–ä½ˆå±€è¨ˆç®—
6. å¯¦ä½œè¦–åœ–åˆ‡æ›å‹•ç•«
7. å¯¦ä½œæ»‘é¼ äº’å‹•æ§åˆ¶
8. å¯¦ä½œéŸ¿æ‡‰å¼è¦–çª—èª¿æ•´
9. æ¸¬è©¦èˆ‡é©—è­‰

---

## Technical Architecture

### Component Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        index.html                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    <style>     â”‚  â”‚   <div#menu>   â”‚  â”‚ <div#container>â”‚ â”‚
â”‚  â”‚  CSS Styles    â”‚  â”‚  4 Buttons     â”‚  â”‚ CSS3DRenderer  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              <script type="module">                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚                 Imports                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - THREE                                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - TWEEN                                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - TrackballControls                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - CSS3DRenderer, CSS3DObject                    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚                 Data                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - table[] (118 å…ƒç´  Ã— 5 å±¬æ€§)                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - objects[] (118 CSS3DObject)                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - targets.table/sphere/helix/grid[]             â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚               Functions                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - init()                                        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - transform(targets, duration)                  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - onWindowResize()                              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - animate()                                     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - render()                                      â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow

```
Page Load
    â”‚
    â–¼
init()
    â”‚
    â”œâ”€â–º Create Camera (PerspectiveCamera, z=3000)
    â”‚
    â”œâ”€â–º Create Scene (THREE.Scene)
    â”‚
    â”œâ”€â–º Create Element Cards (118Ã—)
    â”‚   â”‚
    â”‚   â”œâ”€â–º createElement('div.element')
    â”‚   â”œâ”€â–º Set random backgroundColor
    â”‚   â”œâ”€â–º Add .number, .symbol, .details
    â”‚   â”œâ”€â–º new CSS3DObject(element)
    â”‚   â”œâ”€â–º Set random initial position
    â”‚   â””â”€â–º scene.add(), objects.push()
    â”‚
    â”œâ”€â–º Calculate Target Layouts
    â”‚   â”‚
    â”‚   â”œâ”€â–º targets.table[] (x = colÃ—140-1330, y = -rowÃ—180+990)
    â”‚   â”œâ”€â–º targets.sphere[] (spherical coords, r=800)
    â”‚   â”œâ”€â–º targets.helix[] (cylindrical coords, r=900)
    â”‚   â””â”€â–º targets.grid[] (5Ã—5Ã—5 grid)
    â”‚
    â”œâ”€â–º Create CSS3DRenderer
    â”‚
    â”œâ”€â–º Create TrackballControls
    â”‚   â”‚
    â”‚   â”œâ”€â–º minDistance = 500
    â”‚   â””â”€â–º maxDistance = 6000
    â”‚
    â”œâ”€â–º Setup Button Event Listeners
    â”‚   â”‚
    â”‚   â”œâ”€â–º #table â†’ transform(targets.table, 2000)
    â”‚   â”œâ”€â–º #sphere â†’ transform(targets.sphere, 2000)
    â”‚   â”œâ”€â–º #helix â†’ transform(targets.helix, 2000)
    â”‚   â””â”€â–º #grid â†’ transform(targets.grid, 2000)
    â”‚
    â”œâ”€â–º Initial Transform â†’ targets.table
    â”‚
    â””â”€â–º Start animate() loop
        â”‚
        â”œâ”€â–º requestAnimationFrame(animate)
        â”œâ”€â–º TWEEN.update()
        â””â”€â–º controls.update()
```

---

## Risk Assessment

| é¢¨éšª | å¯èƒ½æ€§ | å½±éŸ¿ | ç·©è§£æªæ–½ |
|------|--------|------|----------|
| CDN ä¸å¯ç”¨ | ä½ | é«˜ | ä½¿ç”¨ unpkg ä½œç‚ºä¸»è¦ CDNï¼Œå¯å‚™é¸ jsdelivr |
| èˆŠç‰ˆç€è¦½å™¨ä¸æ”¯æ´ | ä¸­ | ä¸­ | ç›®æ¨™ç‚ºç¾ä»£ç€è¦½å™¨ï¼Œæ–‡ä»¶ä¸­èªªæ˜éœ€æ±‚ |
| 118 å€‹ DOM å…ƒç´ æ•ˆèƒ½å•é¡Œ | ä½ | ä¸­ | CSS3D æ¯” WebGL æ–‡å­—æ›´é«˜æ•ˆï¼Œç¶“å®˜æ–¹ç¯„ä¾‹é©—è­‰ |

---

## Success Validation

| é©—æ”¶æ¨™æº– | é©—è­‰æ–¹æ³• |
|----------|----------|
| SC-001: 3 ç§’å…§å®Œæˆåˆå§‹å‹•ç•« | æ‰‹å‹•è¨ˆæ™‚è§€å¯Ÿ |
| SC-002: è¦–åœ–åˆ‡æ› 2-4 ç§’å®Œæˆ | æ‰‹å‹•è¨ˆæ™‚è§€å¯Ÿ |
| SC-003: 118 å…ƒç´ æ­£ç¢ºé¡¯ç¤º | è¦–è¦ºæª¢æŸ¥ + è¨ˆæ•¸ |
| SC-004: æ»‘é¼ äº’å‹•æµæš¢ | æ‰‹å‹•æ¸¬è©¦æ‹–æ›³å’Œç¸®æ”¾ |
| SC-005: ç¾ä»£ç€è¦½å™¨ç›¸å®¹ | Chrome/Firefox/Safari/Edge æ¸¬è©¦ |

---

## Next Steps

åŸ·è¡Œ `/speckit.tasks` ç”¢ç”Ÿè©³ç´°çš„ä»»å‹™åˆ†è§£æ¸…å–®ï¼Œé€²å…¥å¯¦ä½œéšæ®µã€‚
